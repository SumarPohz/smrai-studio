<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- â”€â”€ Primary SEO â”€â”€ -->
  <title>SmrAI-Studio â€“ AI Resume Builder with Voice Input</title>
  <meta name="description"  content="Create professional resumes using AI voice input and smart suggestions. Download A4 JPG or PDF instantly. Perfect for students and job seekers in India.">
  <meta name="keywords"     content="AI resume builder, resume maker online, voice resume builder, professional CV builder, resume AI India">
  <meta name="author"       content="Sumar Pohsnem">
  <meta name="robots"       content="index, follow">
  <meta name="theme-color"  content="#0f172a">

  <!-- â”€â”€ Canonical â”€â”€ -->
  <link rel="canonical" href="https://smrai-studio.onrender.com/">

  <!-- â”€â”€ Favicons â”€â”€ -->
  <link rel="icon"             type="image/png" sizes="32x32" href="/images/favicon-32.png">
  <link rel="icon"             type="image/png" sizes="16x16" href="/images/favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180"                href="/images/apple-touch-icon.png">

  <!-- â”€â”€ Open Graph (Facebook, WhatsApp, LinkedIn) â”€â”€ -->
  <meta property="og:title"        content="SmrAI-Studio â€“ AI Resume Builder">
  <meta property="og:description"  content="Create professional resumes with AI voice input and smart suggestions. Download A4 JPG or PDF instantly.">
  <meta property="og:image"        content="https://smrai-studio.onrender.com/images/social-preview.png">
  <meta property="og:image:width"  content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url"          content="https://smrai-studio.onrender.com/">
  <meta property="og:type"         content="website">

  <!-- â”€â”€ Twitter Card â”€â”€ -->
  <meta name="twitter:card"        content="summary_large_image">
  <meta name="twitter:title"       content="SmrAI-Studio â€“ AI Resume Builder">
  <meta name="twitter:description" content="AI-powered resume builder with voice input and smart content enhancement.">
  <meta name="twitter:image"       content="https://smrai-studio.onrender.com/images/social-preview.png">

  <!-- â”€â”€ Structured Data (JSON-LD) â”€â”€ -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "SmrAI-Studio",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "Web",
    "description": "AI-powered resume builder with voice input and smart content enhancement.",
    "url": "https://smrai-studio.onrender.com/"
  }
  </script>

  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/templates.css" />
</head>
<body>
  <header class="top-header">
  <div class="header-left">
    <!-- NEW: mobile hamburger -->
    <button
      class="menu-toggle"
      id="main-menu-toggle"
      type="button"
      aria-label="Toggle navigation"
      aria-expanded="false"
    >
      <span class="hbr-bar"></span>
      <span class="hbr-bar"></span>
      <span class="hbr-bar"></span>
    </button>

    <a href="/" class="brand">
      <img src="/images/logo.png" alt="SmrAI-Studio Logo" class="brand-logo">
    </a>
  </div>

  <!-- add id so JS can toggle -->
  <nav class="header-nav" id="main-nav">
    <a href="/">Home</a>
    <% if (currentUser) { %>
      <a href="/dashboard">Dashboard</a>
      <a href="/resume-builder">Resume Builder</a>
      <!-- ðŸ”¹ New links -->
      <a href="/resumes">My Resumes</a>
      <a href="/payments">Payments</a>
    <% } else { %>
      <a href="/login">Login</a>
      <a href="/register">Register</a>
    <% } %>
  </nav>

  <div class="header-right">
    <% if (currentUser) { %>
      <button id="user-menu-toggle" class="user-avatar-btn" type="button" title="<%= userProfile && userProfile.profile_image_url ? 'View profile' : 'Upload your photo' %>">
        <% if (userProfile && userProfile.profile_image_url) { %>
          <img src="<%= userProfile.profile_image_url %>" alt="User" />
        <% } else { %>
          <span class="avatar-no-photo">
            <!-- Person silhouette -->
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="12" cy="8" r="4"/>
              <path d="M4 20c0-4 3.6-7 8-7s8 3 8 7"/>
            </svg>
          </span>
          <!-- Camera badge â€” hints at photo upload -->
          <span class="avatar-camera-badge" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
              <circle cx="12" cy="13" r="4"/>
            </svg>
          </span>
        <% } %>
      </button>
    <% } %>
  </div>
</header>


  <% if (currentUser) { %>
    <div id="user-sidebar-backdrop" class="user-sidebar-backdrop"></div>
    <aside id="user-sidebar" class="user-sidebar">
      <div class="user-sidebar-header">
        <h2>User Details</h2>
        <button id="user-sidebar-close" type="button" aria-label="Close Sidebar">&times;</button>
      </div>

      <div class="user-sidebar-body">
        <!-- Avatar block -->
        <div class="sidebar-avatar-block">
          <div class="sidebar-avatar">
            <% if (userProfile && userProfile.profile_image_url) { %>
              <img src="<%= userProfile.profile_image_url %>" alt="User" />
            <% } else { %>
              <div class="avatar-placeholder-big">
                <span><%= (currentUser.name || currentUser.email).charAt(0).toUpperCase() %></span>
              </div>
            <% } %>
          </div>
          <div class="sidebar-avatar-meta">
            <p class="sidebar-name">
              <%= userProfile?.full_name || currentUser.name || "Your name" %>
            </p>
            <p class="sidebar-email"><%= currentUser.email %></p>
          </div>
        </div>

        <!-- Edit profile -->
        <div class="sidebar-section">
          <h3 class="sidebar-section-title">Profile</h3>

          <form action="/profile/update" method="POST" class="sidebar-profile-form">
            <label for="sidebar-name">Name</label>
            <input
              type="text"
              id="sidebar-name"
              name="name"
              value="<%= userProfile?.full_name || currentUser.name || '' %>"
              placeholder="Your name"
            />

            <label for="sidebar-phone">Phone</label>
            <input
              type="text"
              id="sidebar-phone"
              name="phone"
              value="<%= userProfile?.phone || '' %>"
              placeholder="+91 ..."
            />

            <label for="sidebar-location">Location</label>
            <input
              type="text"
              id="sidebar-location"
              name="location"
              value="<%= userProfile?.location || '' %>"
              placeholder="City, Country"
            />

            <button type="submit" class="sidebar-save-btn">
              <i class="fas fa-save"></i>
              Save changes
            </button>
          </form>
        </div>

        <!-- Photo -->
        <div class="sidebar-section">
          <h3 class="sidebar-section-title">Profile photo</h3>
          <p class="sidebar-help-text">This photo is used in your resume templates.</p>
          <form action="/profile/photo" method="POST" enctype="multipart/form-data" class="sidebar-photo-form">
            <input type="file" name="profilePhoto" accept="image/*" />
            <button type="submit" class="sidebar-upload-btn">
              <i class="fas fa-upload"></i>
              Upload
            </button>
          </form>
        </div>

        <!-- Logout -->
        <div class="sidebar-section sidebar-section-footer">
          <form action="/logout" method="POST">
            <button type="submit" class="logout-btn">
              <i class="fas fa-sign-out-alt"></i>
              Logout
            </button>
          </form>
        </div>
      </div>
    </aside>

    <script>
      const toggleBtn = document.getElementById("user-menu-toggle");
      const sidebar = document.getElementById("user-sidebar");
      const backdrop = document.getElementById("user-sidebar-backdrop");
      const closeBtn = document.getElementById("user-sidebar-close");

      function openSidebar() {
        sidebar.classList.add("open");
        backdrop.classList.add("open");
        if (toggleBtn) toggleBtn.classList.add("is-open");
      }
      function closeSidebar() {
        sidebar.classList.remove("open");
        backdrop.classList.remove("open");
        if (toggleBtn) toggleBtn.classList.remove("is-open");
      }

      if (toggleBtn) toggleBtn.addEventListener("click", openSidebar);
      if (closeBtn) closeBtn.addEventListener("click", closeSidebar);
      if (backdrop) backdrop.addEventListener("click", closeSidebar);
    </script>
  <% } %>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const menuToggle = document.getElementById("main-menu-toggle");
      const mainNav = document.getElementById("main-nav");

      if (menuToggle && mainNav) {
        function closeNav() {
          mainNav.classList.remove("nav-open");
          menuToggle.classList.remove("is-open");
          menuToggle.setAttribute("aria-expanded", "false");
        }

        menuToggle.addEventListener("click", (e) => {
          e.stopPropagation();
          const isOpen = mainNav.classList.toggle("nav-open");
          menuToggle.classList.toggle("is-open", isOpen);
          menuToggle.setAttribute("aria-expanded", String(isOpen));
        });

        mainNav.querySelectorAll("a").forEach((link) => {
          link.addEventListener("click", closeNav);
        });

        document.addEventListener("click", (e) => {
          if (!mainNav.classList.contains("nav-open")) return;
          if (!mainNav.contains(e.target) && !menuToggle.contains(e.target)) {
            closeNav();
          }
        });
      }
    });
  </script>

  <main>
